<launch>
<!--
client_side.launch

This launch file is used exclusively with robot_side.launch
in the package proxemics_anytime_rrts.
The launch file consists of:
relay
octomap
rviz
-->


<arg name="in_odom" default="/odometry/filtered" />
<arg name="scan_topic" default="/scan" />
<arg name="overall_out_vel" default="/cmd_vel" />
<arg name="cloud_in" default="/camera/depth_registered/points" />


<!--**********Auxiliary planner ***************-->
<!--
Global planners:
Dijkstra: (blank, default)
AD*: SBPLLatticePlanner
ADRRT*: anytimeRRTs/AnytimeRRTsROS
Social Aware ADRRT*: proxemics_anytimerrts/ProxemicsAnytimeRRTs
lattice_planner (A*): lattice_planner/TBPlanner

Local Planners:
Dynamic Window Algorithm: dwa_local_planner/DWAPlannerROS
path follower: path_executer/PathFollower
Timed Elastic Band: teb_local_planner/TebLocalPlannerROS
Pose follower: pose_follower/PoseFollower
Time path follower: path_executer/PathFollower
-->
<!--
<arg name="global_planner" default="anytimeRRTs/AnytimeRRTsROS"/>
<arg name="local_planner" default="teb_local_planner/TebLocalPlannerROS" />

<remap from="/odom" to="$(arg in_odom)" />
<include file="$(find proxemics_anytimerrts)/launch/realBeebotLaunch/real_move_base.launch">
  <arg name="scan_topic" value="$(arg scan_topic)" />
  <arg name="global_planner" value="$(arg global_planner)" />
  <arg name="local_planner"  value="$(arg local_planner)" />
  <arg name="output_vel"     value="cmd_vel_mux/nav_cmd_vel" />
  <arg name="odom_in"        value="$(arg in_odom)" />
</include>
--> 


<!-- ******** Relay and Throttle*********** -->
<include file="$(find proxemics_anytimerrts)/launch/realBeebotLaunch/client_communication.launch" >
   <arg name="r_odom_in"        value="/odom_throttled" />
   <arg name="r_odom_relay"     value="/odom_th_relay"  />
   <arg name="r_scan_in"        value="/scan_throttled" />
   <arg name="r_scan_relay"     value="/scan_th_relay" />
   <arg name="r_camInfo_in"     value="/cam_info_throttled" />
   <arg name="r_camInfo_relay"  value="/camera_info_th_relay" />

   <arg name="r_rgb_in"         value="/rgb_image_throttled" />  <!--~/theora-->
   <arg name="r_rgb_relay"      value="/rgb_image_th_relay" />
   <arg name="r_dpth_in"        value="/depth_throttled" />  <!--~/compressedDepth-->
   <arg name="r_dpth_relay"     value="/depth_image_th_relay" />

   <arg name="cmd_vel_in"       value="/cmd_vel" />
   <arg name="cmd_vel_out_th"   value="/cmd_vel_th" />
   <arg name="cmd_vel_th_rate"  value="1" />
</include>



<!--**********laser people detection *****-->
<include file="$(find proxemics_anytimerrts)/launch/gazebo_simulation/people_detection/laser_people_detector.launch" >
  <arg name="scan_topic" value="/scan" />
</include>

<include file="$(find proxemics_anytimerrts)/launch/gazebo_simulation/people_detection/people_tracking.launch" />

<include file="$(find proxemics_anytimerrts)/launch/gazebo_simulation/people_detection/group_tracking.launch" />


<!-- ******* Optional: Octomap ******-->
<node pkg="octomap_server" type="octomap_server_node" name="octomap_server_node">
  <param name="frame_id"         value="map" />
  <param name="base_frame_id"    value="base_link" />
  <remap from="cloud_in"         to="$(arg cloud_in)" />
</node>

<!--********** Rviz ************* -->
<arg name="rvizconfig" default="$(find proxemics_anytimerrts)/launch/rviz_config/human_aware_nav.rviz" />
<node name="rviz" pkg="rviz" type="rviz" args="-d $(arg rvizconfig)" required="true" />
</launch>
